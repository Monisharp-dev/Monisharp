<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Monisharp Card Flip Game</title>
  <style>
    body {
      margin:0; font-family:'Segoe UI',sans-serif;
      background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
      color:#fff; display:flex; flex-direction:column; min-height:100vh;
    }
    header {
      background:linear-gradient(90deg,#0284c7,#0ea5e9);
      padding:14px 18px; font-size:1.2rem; font-weight:bold;
      display:flex; justify-content:space-between; align-items:center;
      box-shadow:0 4px 10px rgba(0,0,0,0.3);
    }
    .balance {
      background:rgba(255,255,255,0.15);
      padding:6px 12px; border-radius:14px; font-size:0.9rem;
    }
    main {
      flex:1; display:flex; flex-direction:column;
      align-items:center; justify-content:center; text-align:center;
      padding:20px;
    }
    h2 { margin-bottom:12px; color:#facc15; }
    .cards { display:flex; gap:20px; margin-top:20px; }
    .card {
      width:100px; height:150px; perspective:1000px; cursor:pointer;
    }
    .inner {
      position:relative; width:100%; height:100%;
      transform-style:preserve-3d; transition:transform 0.8s;
    }
    .flipped { transform:rotateY(180deg); }
    .front, .back {
      position:absolute; width:100%; height:100%; border-radius:10px;
      backface-visibility:hidden; display:flex; align-items:center; justify-content:center;
      font-size:1.2rem; font-weight:bold;
    }
    .front { background:#0ea5e9; }
    .back { background:#fff; color:#222; transform:rotateY(180deg); }
    .msg { margin-top:20px; font-size:1rem; font-weight:bold; }
    footer {
      text-align:center; padding:12px; font-size:0.85rem;
      background:rgba(0,0,0,0.6); color:#ddd;
    }
    .btn {
      background:#facc15; color:#000; font-weight:bold;
      padding:10px 16px; border:0; border-radius:8px; cursor:pointer;
      margin-top:20px;
    }
  </style>
</head>
<body>
  <header>
    <div>üÉè Monisharp Card Flip</div>
    <div class="balance">üí∞ Balance: <span id="depositBalance">‚Ç¶0</span></div>
  </header>

  <main>
    <h2>Pick a card - Stake ‚Ç¶20</h2>
    <p>One card doubles your money (‚Ç¶40), one returns stake (‚Ç¶20), one loses all.</p>
    <div class="cards">
      <div class="card" onclick="flipCard(this,0)"><div class="inner"><div class="front">‚ùì</div><div class="back"></div></div></div>
      <div class="card" onclick="flipCard(this,1)"><div class="inner"><div class="front">‚ùì</div><div class="back"></div></div></div>
      <div class="card" onclick="flipCard(this,2)"><div class="inner"><div class="front">‚ùì</div><div class="back"></div></div></div>
    </div>
    <div class="msg" id="msg"></div>
    <button class="btn" onclick="resetGame()">üîÑ Play Again</button>
  </main>

  <footer>üéâ Flip wisely & test your luck!</footer>

  <script>
  const userId = localStorage.getItem("plus-Id") || "guest";
  const depositKey = "plus-depositBalance_" + userId;
  if (!localStorage.getItem(depositKey)) localStorage.setItem(depositKey, "0"); // start with ‚Ç¶0

  function updateBalance() {
    let bal = parseInt(localStorage.getItem(depositKey));
    document.getElementById("depositBalance").innerText = "‚Ç¶" + bal;
  }
  updateBalance();

  let flipped = false;

  // üé≤ Function to pick outcome based on given probabilities
  function getOutcome() {
    let rand = Math.random(); // 0 - 1
    if (rand < 0.2) return 40;         // 20% chance ‚Üí ‚Ç¶40
    else if (rand < 0.5) return 20;    // next 30% chance ‚Üí ‚Ç¶20
    else return 0;                     // remaining 50% chance ‚Üí Lose
  }

  function flipCard(card, idx) {
    if (flipped) return;
    let bal = parseInt(localStorage.getItem(depositKey));
    if (bal < 20) {
      document.getElementById("msg").innerText = "‚ùå Not enough balance.";
      return;
    }

    // Deduct stake
    bal -= 20;

    // Decide outcome based on probability
    let win = getOutcome();
    bal += win;

    // Save and update balance
    localStorage.setItem(depositKey, bal);
    updateBalance();

    // Flip animation + result display
    card.querySelector(".inner").classList.add("flipped");
    card.querySelector(".back").innerText = (win === 0 ? "üíÄ Lose" : "üéâ ‚Ç¶" + win);

    document.getElementById("msg").innerText =
      (win === 0 ? "Oh no! You lost ‚Ç¶20." : "Congrats! You won ‚Ç¶" + win);

    flipped = true;
  }

  function resetGame() {
    document.getElementById("msg").innerText = "";
    document.querySelectorAll(".card .inner").forEach(el => {
      el.classList.remove("flipped");
      el.querySelector(".back").innerText = "";
    });
    flipped = false;
  }
</script>
</body>
</html>